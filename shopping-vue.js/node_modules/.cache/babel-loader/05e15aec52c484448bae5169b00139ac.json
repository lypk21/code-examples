{"remainingRequest":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/liuyingping/Desktop/www/vue/shopping/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuyingping/Desktop/www/vue/shopping/src/components/ratings/ratings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuyingping/Desktop/www/vue/shopping/src/components/ratings/ratings.vue","mtime":1578012741870},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/cache-loader/dist/cjs.js","mtime":1578012874466},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Star from 'components/star/star';\nimport RatingSelect from 'components/rating-select/rating-select';\nimport Split from 'components/split/split';\nimport ratingMixin from 'common/mixins/rating';\nimport { getRatings } from 'api';\nimport moment from 'moment';\nexport default {\n  name: 'ratings',\n  mixins: [ratingMixin],\n  props: {\n    data: {\n      type: Object\n    }\n  },\n  data: function data() {\n    return {\n      ratings: [],\n      scrollOptions: {\n        click: false,\n        directionLockThreshold: 0\n      }\n    };\n  },\n  computed: {\n    seller: function seller() {\n      return this.data.seller || {};\n    }\n  },\n  methods: {\n    fetch: function fetch() {\n      var _this = this;\n\n      if (!this.fetched) {\n        this.fetched = true;\n        getRatings({\n          id: this.seller.id\n        }).then(function (ratings) {\n          _this.ratings = ratings;\n        });\n      }\n    },\n    format: function format(time) {\n      return moment(time).format('YYYY-MM-DD hh:mm');\n    }\n  },\n  components: {\n    Star: Star,\n    Split: Split,\n    RatingSelect: RatingSelect\n  },\n  watch: {\n    selectType: function selectType() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.$refs.scroll.refresh();\n      });\n    }\n  }\n};",{"version":3,"sources":["ratings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA,OAAA,IAAA,MAAA,sBAAA;AACA,OAAA,YAAA,MAAA,wCAAA;AACA,OAAA,KAAA,MAAA,wBAAA;AACA,OAAA,WAAA,MAAA,sBAAA;AACA,SAAA,UAAA,QAAA,KAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,QAAA,SADA;AAEA,UAAA,CAAA,WAAA,CAFA;AAGA,SAAA;AACA,UAAA;AACA,YAAA;AADA;AADA,GAHA;AAQA,MARA,kBAQA;AACA,WAAA;AACA,eAAA,EADA;AAEA,qBAAA;AACA,eAAA,KADA;AAEA,gCAAA;AAFA;AAFA,KAAA;AAOA,GAhBA;AAiBA,YAAA;AACA,UADA,oBACA;AACA,aAAA,KAAA,IAAA,CAAA,MAAA,IAAA,EAAA;AACA;AAHA,GAjBA;AAsBA,WAAA;AACA,SADA,mBACA;AAAA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,mBAAA;AACA,cAAA,KAAA,MAAA,CAAA;AADA,SAAA,EAEA,IAFA,CAEA,UAAA,OAAA,EAAA;AACA,gBAAA,OAAA,GAAA,OAAA;AACA,SAJA;AAKA;AACA,KAVA;AAWA,UAXA,kBAWA,IAXA,EAWA;AACA,aAAA,OAAA,IAAA,EAAA,MAAA,CAAA,kBAAA,CAAA;AACA;AAbA,GAtBA;AAqCA,cAAA;AACA,cADA;AAEA,gBAFA;AAGA;AAHA,GArCA;AA0CA,SAAA;AACA,cADA,wBACA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,eAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AACA,OAFA;AAGA;AALA;AA1CA,CAAA","sourcesContent":["<template>\n  <cube-scroll ref=\"scroll\" class=\"ratings\" :options=\"scrollOptions\">\n    <div class=\"ratings-content\">\n      <div class=\"overview\">\n        <div class=\"overview-left\">\n          <h1 class=\"score\">{{seller.score}}</h1>\n          <div class=\"title\">综合评分</div>\n          <div class=\"rank\">高于周边商家{{seller.rankRate}}%</div>\n        </div>\n        <div class=\"overview-right\">\n          <div class=\"score-wrapper\">\n            <span class=\"title\">服务态度</span>\n            <star :size=\"36\" :score=\"seller.serviceScore\"></star>\n            <span class=\"score\">{{seller.serviceScore}}</span>\n          </div>\n          <div class=\"score-wrapper\">\n            <span class=\"title\">商品评分</span>\n            <star :size=\"36\" :score=\"seller.foodScore\"></star>\n            <span class=\"score\">{{seller.foodScore}}</span>\n          </div>\n          <div class=\"delivery-wrapper\">\n            <span class=\"title\">送达时间</span>\n            <span class=\"delivery\">{{seller.deliveryTime}}分钟</span>\n          </div>\n        </div>\n      </div>\n      <split></split>\n      <rating-select\n        @select=\"onSelect\"\n        @toggle=\"onToggle\"\n        :selectType=\"selectType\"\n        :onlyContent=\"onlyContent\"\n        :ratings=\"ratings\"\n      >\n      </rating-select>\n      <div class=\"rating-wrapper\">\n        <ul>\n          <li\n            v-for=\"(rating,index) in computedRatings\"\n            :key=\"index\"\n            class=\"rating-item border-bottom-1px\"\n          >\n            <div class=\"avatar\">\n              <img width=\"28\" height=\"28\" :src=\"rating.avatar\">\n            </div>\n            <div class=\"content\">\n              <h1 class=\"name\">{{rating.username}}</h1>\n              <div class=\"star-wrapper\">\n                <star :size=\"24\" :score=\"rating.score\"></star>\n                <span class=\"delivery\" v-show=\"rating.deliveryTime\">{{rating.deliveryTime}}</span>\n              </div>\n              <p class=\"text\">{{rating.text}}</p>\n              <div class=\"recommend\" v-show=\"rating.recommend && rating.recommend.length\">\n                <span class=\"icon-thumb_up\"></span>\n                <span\n                  class=\"item\"\n                  v-for=\"(item,index) in rating.recommend\"\n                  :key=\"index\"\n                >\n                  {{item}}\n                </span>\n              </div>\n              <div class=\"time\">\n                {{format(rating.rateTime)}}\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </cube-scroll>\n</template>\n\n<script>\n  import Star from 'components/star/star'\n  import RatingSelect from 'components/rating-select/rating-select'\n  import Split from 'components/split/split'\n  import ratingMixin from 'common/mixins/rating'\n  import { getRatings } from 'api'\n  import moment from 'moment'\n\n  export default {\n    name: 'ratings',\n    mixins: [ratingMixin],\n    props: {\n      data: {\n        type: Object\n      }\n    },\n    data () {\n      return {\n        ratings: [],\n        scrollOptions: {\n          click: false,\n          directionLockThreshold: 0\n        }\n      }\n    },\n    computed: {\n      seller () {\n        return this.data.seller || {}\n      }\n    },\n    methods: {\n      fetch () {\n        if (!this.fetched) {\n          this.fetched = true\n          getRatings({\n            id: this.seller.id\n          }).then((ratings) => {\n            this.ratings = ratings\n          })\n        }\n      },\n      format (time) {\n        return moment(time).format('YYYY-MM-DD hh:mm')\n      }\n    },\n    components: {\n      Star,\n      Split,\n      RatingSelect\n    },\n    watch: {\n      selectType () {\n        this.$nextTick(() => {\n          this.$refs.scroll.refresh()\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"~common/stylus/variable\"\n  @import \"~common/stylus/mixin\"\n\n  .ratings\n    position: relative\n    text-align: left\n    white-space: normal\n    height: 100%\n    .overview\n      display: flex\n      padding: 18px 0\n      .overview-left\n        flex: 0 0 137px\n        padding: 6px 0\n        width: 137px\n        border-right: 1px solid $color-col-line\n        text-align: center\n        @media only screen and (max-width: 320px)\n          flex: 0 0 120px\n          width: 120px\n        .score\n          margin-bottom: 6px\n          line-height: 28px\n          font-size: $fontsize-large-xxx\n          color: $color-orange\n        .title\n          margin-bottom: 8px\n          line-height: 12px\n          font-size: $fontsize-small\n          color: $color-dark-grey\n        .rank\n          line-height: 10px\n          font-size: $fontsize-small-s\n          color: $color-light-grey\n      .overview-right\n        flex: 1\n        padding: 6px 0 6px 24px\n        @media only screen and (max-width: 320px)\n          padding-left: 6px\n        .score-wrapper\n          display: flex\n          align-items: center\n          margin-bottom: 8px\n          .title\n            line-height: 18px\n            font-size: $fontsize-small\n            color: $color-dark-grey\n          .star\n            margin: 0 12px\n          .score\n            line-height: 18px\n            font-size: $fontsize-small\n            color: $color-orange\n        .delivery-wrapper\n          display: flex\n          align-items: center\n          .title\n            line-height: 18px\n            font-size: $fontsize-small\n            color: $color-dark-grey\n          .delivery\n            margin-left: 12px\n            font-size: $fontsize-small\n            color: $color-light-grey\n    .rating-wrapper\n      padding: 0 18px\n      .rating-item\n        display: flex\n        padding: 18px 0\n        &:last-child\n          border-none()\n        .avatar\n          flex: 0 0 28px\n          width: 28px\n          margin-right: 12px\n          img\n            height: auto\n            border-radius: 50%\n        .content\n          position: relative\n          flex: 1\n          .name\n            margin-bottom: 4px\n            line-height: 12px\n            font-size: $fontsize-small-s\n            color: $color-dark-grey\n          .star-wrapper\n            margin-bottom: 6px\n            display: flex\n            align-items: center\n            .star\n              margin-right: 6px\n            .delivery\n              font-size: $fontsize-small-s\n              color: $color-light-grey\n          .text\n            margin-bottom: 8px\n            line-height: 18px\n            color: $color-dark-grey\n            font-size: $fontsize-small\n          .recommend\n            display: flex\n            align-items: center\n            flex-wrap: wrap\n            line-height: 16px\n            .icon-thumb_up, .item\n              margin: 0 8px 4px 0\n              font-size: $fontsize-small-s\n            .icon-thumb_up\n              color: $color-blue\n            .item\n              padding: 0 6px\n              border: 1px solid $color-row-line\n              border-radius: 1px\n              color: $color-light-grey\n              background: $color-white\n          .time\n            position: absolute\n            top: 0\n            right: 0\n            line-height: 12px\n            font-size: $fontsize-small\n            color: $color-light-grey\n</style>\n"],"sourceRoot":"src/components/ratings"}]}