{"remainingRequest":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/liuyingping/Desktop/www/vue/shopping/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuyingping/Desktop/www/vue/shopping/src/components/goods/goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuyingping/Desktop/www/vue/shopping/src/components/goods/goods.vue","mtime":1578012741868},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/cache-loader/dist/cjs.js","mtime":1578012874466},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Users/liuyingping/Desktop/www/vue/shopping/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getGoods } from 'api';\nimport CartControl from 'components/cart-control/cart-control';\nimport ShopCart from 'components/shop-cart/shop-cart';\nimport Food from 'components/food/food';\nimport SupportIco from 'components/support-ico/support-ico';\nimport Bubble from 'components/bubble/bubble';\nexport default {\n  name: 'goods',\n  props: {\n    data: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      goods: [],\n      selectedFood: {},\n      scrollOptions: {\n        click: false,\n        directionLockThreshold: 0\n      }\n    };\n  },\n  computed: {\n    seller: function seller() {\n      return this.data.seller;\n    },\n    selectFoods: function selectFoods() {\n      var foods = [];\n      this.goods.forEach(function (good) {\n        good.foods.forEach(function (food) {\n          if (food.count) {\n            foods.push(food);\n          }\n        });\n      });\n      return foods;\n    },\n    barTxts: function barTxts() {\n      var ret = [];\n      this.goods.forEach(function (good) {\n        var type = good.type,\n            name = good.name,\n            foods = good.foods;\n        var count = 0;\n        foods.forEach(function (food) {\n          count += food.count || 0;\n        });\n        ret.push({\n          type: type,\n          name: name,\n          count: count\n        });\n      });\n      return ret;\n    }\n  },\n  methods: {\n    fetch: function fetch() {\n      var _this = this;\n\n      if (!this.fetched) {\n        this.fetched = true;\n        getGoods({\n          id: this.seller.id\n        }).then(function (goods) {\n          _this.goods = goods;\n        });\n      }\n    },\n    selectFood: function selectFood(food) {\n      this.selectedFood = food;\n\n      this._showFood();\n\n      this._showShopCartSticky();\n    },\n    onAdd: function onAdd(target) {\n      this.$refs.shopCart.drop(target);\n    },\n    _showFood: function _showFood() {\n      var _this2 = this;\n\n      this.foodComp = this.foodComp || this.$createFood({\n        $props: {\n          food: 'selectedFood'\n        },\n        $events: {\n          add: function add(target) {\n            _this2.shopCartStickyComp.drop(target);\n          },\n          leave: function leave() {\n            _this2._hideShopCartSticky();\n          }\n        }\n      });\n      this.foodComp.show();\n    },\n    _showShopCartSticky: function _showShopCartSticky() {\n      this.shopCartStickyComp = this.shopCartStickyComp || this.$createShopCartSticky({\n        $props: {\n          selectFoods: 'selectFoods',\n          deliveryPrice: this.seller.deliveryPrice,\n          minPrice: this.seller.minPrice,\n          fold: true\n        }\n      });\n      this.shopCartStickyComp.show();\n    },\n    _hideShopCartSticky: function _hideShopCartSticky() {\n      this.shopCartStickyComp.hide();\n    }\n  },\n  components: {\n    Bubble: Bubble,\n    SupportIco: SupportIco,\n    CartControl: CartControl,\n    ShopCart: ShopCart,\n    Food: Food\n  }\n};",{"version":3,"sources":["goods.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"goods\">\n    <div class=\"scroll-nav-wrapper\">\n      <cube-scroll-nav\n        :side=true\n        :data=\"goods\"\n        :options=\"scrollOptions\"\n        v-if=\"goods.length\"\n      >\n        <template slot=\"bar\" slot-scope=\"props\">\n          <cube-scroll-nav-bar\n            direction=\"vertical\"\n            :labels=\"props.labels\"\n            :txts=\"barTxts\"\n            :current=\"props.current\"\n          >\n            <template slot-scope=\"props\">\n              <div class=\"text\">\n                <support-ico\n                  v-if=\"props.txt.type>=1\"\n                  :size=3\n                  :type=\"props.txt.type\"\n                ></support-ico>\n                <span>{{props.txt.name}}</span>\n                <span class=\"num\" v-if=\"props.txt.count\">\n                  <bubble :num=\"props.txt.count\"></bubble>\n                </span>\n              </div>\n            </template>\n          </cube-scroll-nav-bar>\n        </template>\n        <cube-scroll-nav-panel\n          v-for=\"good in goods\"\n          :key=\"good.name\"\n          :label=\"good.name\"\n          :title=\"good.name\"\n        >\n          <ul>\n            <li\n              @click=\"selectFood(food)\"\n              v-for=\"food in good.foods\"\n              :key=\"food.name\"\n              class=\"food-item\"\n            >\n              <div class=\"icon\">\n                <img width=\"57\" height=\"57\" :src=\"food.icon\">\n              </div>\n              <div class=\"content\">\n                <h2 class=\"name\">{{food.name}}</h2>\n                <p class=\"desc\">{{food.description}}</p>\n                <div class=\"extra\">\n                  <span class=\"count\">月售{{food.sellCount}}份</span><span>好评率{{food.rating}}%</span>\n                </div>\n                <div class=\"price\">\n                  <span class=\"now\">￥{{food.price}}</span>\n                  <span class=\"old\" v-show=\"food.oldPrice\">￥{{food.oldPrice}}</span>\n                </div>\n                <div class=\"cart-control-wrapper\">\n                  <cart-control @add=\"onAdd\" :food=\"food\"></cart-control>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </cube-scroll-nav-panel>\n      </cube-scroll-nav>\n    </div>\n    <div class=\"shop-cart-wrapper\">\n      <shop-cart\n        ref=\"shopCart\"\n        :select-foods=\"selectFoods\"\n        :delivery-price=\"seller.deliveryPrice\"\n        :min-price=\"seller.minPrice\"></shop-cart>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { getGoods } from 'api'\n  import CartControl from 'components/cart-control/cart-control'\n  import ShopCart from 'components/shop-cart/shop-cart'\n  import Food from 'components/food/food'\n  import SupportIco from 'components/support-ico/support-ico'\n  import Bubble from 'components/bubble/bubble'\n\n  export default {\n    name: 'goods',\n    props: {\n      data: {\n        type: Object,\n        default() {\n          return {}\n        }\n      }\n    },\n    data() {\n      return {\n        goods: [],\n        selectedFood: {},\n        scrollOptions: {\n          click: false,\n          directionLockThreshold: 0\n        }\n      }\n    },\n    computed: {\n      seller() {\n        return this.data.seller\n      },\n      selectFoods() {\n        let foods = []\n        this.goods.forEach((good) => {\n          good.foods.forEach((food) => {\n            if (food.count) {\n              foods.push(food)\n            }\n          })\n        })\n        return foods\n      },\n      barTxts() {\n        let ret = []\n        this.goods.forEach((good) => {\n          const {type, name, foods} = good\n          let count = 0\n          foods.forEach((food) => {\n            count += food.count || 0\n          })\n          ret.push({\n            type,\n            name,\n            count\n          })\n        })\n        return ret\n      }\n    },\n    methods: {\n      fetch() {\n        if (!this.fetched) {\n          this.fetched = true\n          getGoods({\n            id: this.seller.id\n          }).then((goods) => {\n            this.goods = goods\n          })\n        }\n      },\n      selectFood(food) {\n        this.selectedFood = food\n        this._showFood()\n        this._showShopCartSticky()\n      },\n      onAdd(target) {\n        this.$refs.shopCart.drop(target)\n      },\n      _showFood() {\n        this.foodComp = this.foodComp || this.$createFood({\n          $props: {\n            food: 'selectedFood'\n          },\n          $events: {\n            add: (target) => {\n              this.shopCartStickyComp.drop(target)\n            },\n            leave: () => {\n              this._hideShopCartSticky()\n            }\n          }\n        })\n        this.foodComp.show()\n      },\n      _showShopCartSticky() {\n        this.shopCartStickyComp = this.shopCartStickyComp || this.$createShopCartSticky({\n          $props: {\n            selectFoods: 'selectFoods',\n            deliveryPrice: this.seller.deliveryPrice,\n            minPrice: this.seller.minPrice,\n            fold: true\n          }\n        })\n        this.shopCartStickyComp.show()\n      },\n      _hideShopCartSticky() {\n        this.shopCartStickyComp.hide()\n      }\n    },\n    components: {\n      Bubble,\n      SupportIco,\n      CartControl,\n      ShopCart,\n      Food\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"~common/stylus/mixin\"\n  @import \"~common/stylus/variable\"\n  .goods\n    position: relative\n    text-align: left\n    height: 100%\n    .scroll-nav-wrapper\n      position: absolute\n      width: 100%\n      top: 0\n      left: 0\n      bottom: 48px\n    >>> .cube-scroll-nav-bar\n      width: 80px\n      white-space: normal\n      overflow: hidden\n    >>> .cube-scroll-nav-bar-item\n      padding: 0 10px\n      display: flex\n      align-items: center\n      height: 56px\n      line-height: 14px\n      font-size: $fontsize-small\n      background: $color-background-ssss\n      .text\n        flex: 1\n        position: relative\n      .num\n        position: absolute\n        right: -8px\n        top: -10px\n      .support-ico\n        display: inline-block\n        vertical-align: top\n        margin-right: 4px\n    >>> .cube-scroll-nav-bar-item_active\n      background: $color-white\n      color: $color-dark-grey\n    >>> .cube-scroll-nav-panel-title\n      padding-left: 14px\n      height: 26px\n      line-height: 26px\n      border-left: 2px solid $color-col-line\n      font-size: $fontsize-small\n      color: $color-grey\n      background: $color-background-ssss\n    .food-item\n      display: flex\n      margin: 18px\n      padding-bottom: 18px\n      position: relative\n      &:last-child\n        border-none()\n        margin-bottom: 0\n      .icon\n        flex: 0 0 57px\n        margin-right: 10px\n        img\n          height: auto\n      .content\n        flex: 1\n        .name\n          margin: 2px 0 8px 0\n          height: 14px\n          line-height: 14px\n          font-size: $fontsize-medium\n          color: $color-dark-grey\n        .desc, .extra\n          line-height: 10px\n          font-size: $fontsize-small-s\n          color: $color-light-grey\n        .desc\n          line-height: 12px\n          margin-bottom: 8px\n        .extra\n          .count\n            margin-right: 12px\n        .price\n          font-weight: 700\n          line-height: 24px\n          .now\n            margin-right: 8px\n            font-size: $fontsize-medium\n            color: $color-red\n          .old\n            text-decoration: line-through\n            font-size: $fontsize-small-s\n            color: $color-light-grey\n      .cart-control-wrapper\n        position: absolute\n        right: 0\n        bottom: 12px\n    .shop-cart-wrapper\n      position: absolute\n      left: 0\n      bottom: 0\n      z-index: 50\n      width: 100%\n      height: 48px\n</style>\n"],"sourceRoot":"src/components/goods"}]}